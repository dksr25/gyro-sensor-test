<%- include('includes/_head',{
  title : '<title>Main : HTML List</title>'
})%>

<body>
  <div class="wrap">
    <%- include('includes/header') -%>

    <!-- container -->
    <main class="container">
      <div class="scroll_wrap">
        <div class="scroll">
          <div class="slide">1</div>
          <div class="slide">2</div>
          <div class="slide">3</div>
          <div class="slide">4</div>
          <div class="slide">5</div>
          <div class="slide">6</div>
          <div class="slide">7</div>
        </div>
      </div>
    </main>
    <!-- //container -->

    <span class="test">
      <span class="alpha"></span>
      <span class="beta"></span>
      <span class="gamma"></span>
      <span class="accAlpha"></span>
      <span class="accBeta"></span>
      <span class="accGamma"></span>
    </span>
    
    <%- include('includes/footer') -%>
  </div>
<script>
  var slideWrap = document.querySelectorAll('.scroll');
  vw = window.innerWidth;
  slideWrap[0].style.transform = "translateX("+ (20-vw)*3 +"px)"
  slideWrap[1].style.transform = "translateX("+ (20-vw)*3 +"px) translateY(-400px) translateZ(-100px) rotateX(60deg)"
  

  function handleOrientation(e) {
    var absolute = e.absolute;
    var alpha = e.alpha;
    var beta = e.beta;
    var gamma = e.gamma;

    test = {
      alpha: document.querySelectorAll('.test .alpha'),
      beta: document.querySelectorAll('.test .beta'),
      gamma: document.querySelectorAll('.test .gamma')
    }

    test.alpha[0].innerText = Math.round(alpha*100)/100;
    test.beta[0].innerText = Math.round(beta*100)/100;
    test.gamma[0].innerText = Math.round(gamma*100)/100;

    slideWrap[0].style.transform = "translateX("+ ((20-vw)*3 - length) +"px)";
    slideWrap[1].style.transform = "translateX("+ ((20-vw)*3 - length) +"px) translateY(-400px) translateZ(-100px) rotateX(60deg)";
    
    velocity = 0.5 * gamma;
    length = velocity + length;
    
    if(length + (vw-20)*3 > (vw-20)*6){
      length = (vw-20)*3
    } else if(length + (vw-20)*3 < 0) {
      length = -(vw-20)*3
    }
    console.log(length)
  }

  function handleAcc(e) {
    var alpha = e.rotationRate.alpha;
    var beta = e.rotationRate.beta;
    var gamma = e.rotationRate.gamma;

    test = {
      accAlpha: document.querySelectorAll('.test .accAlpha'),
      accBeta: document.querySelectorAll('.test .accBeta'),
      accGamma: document.querySelectorAll('.test .accGamma'),
    }

    test.accAlpha[0].innerText = Math.round(alpha*100)/100;
    test.accBeta[0].innerText = Math.round(beta*100)/100;
    test.accGamma[0].innerText = Math.round(gamma*100)/100;


  }
  
  window.addEventListener("deviceorientation", handleOrientation, true)
  window.addEventListener("devicemotion", handleAcc, true)
</script>  
</body>

</html>
